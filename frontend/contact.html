<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact Us - Hamro Dental Care</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <header class="glass" style="position: sticky; top: 0; z-index: 100;">
        <nav class="container"
            style="display: flex; justify-content: space-between; align-items: center; padding: 1rem 0;">
            <h1 style="font-size: 1.5rem; font-weight: 700; color: var(--primary); cursor: pointer;"
                onclick="location.href='index.html'">Hamro Dental <span style="color: var(--accent);">Care</span></h1>
            <button class="menu-toggle" id="mobile-menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links" style="display: flex; gap: 1.5rem; align-items: center;">
                <a href="index.html" style="text-decoration: none; color: var(--text); font-weight: 500;">Home</a>
                <a href="index.html#services"
                    style="text-decoration: none; color: var(--text); font-weight: 500;">Services</a>
                <a href="about.html" style="text-decoration: none; color: var(--text); font-weight: 500;">About</a>
                <a href="contact.html"
                    style="text-decoration: none; color: var(--primary); font-weight: 700;">Contact</a>
                <div id="auth-links" style="display: flex; gap: 1rem;">
                    <a href="login.html" class="btn btn-outline" style="padding: 0.5rem 1rem;">Login</a>
                    <a href="register.html" class="btn btn-primary" style="padding: 0.5rem 1rem;">Register</a>
                </div>
            </div>
        </nav>
    </header>

    <main>
        <section
            style="padding: 8rem 0; background: var(--gradient); color: white; position: relative; overflow: hidden;">
            <div class="container" style="text-align: center; position: relative; z-index: 2;">
                <h1 style="font-size: 4rem; margin-bottom: 1.5rem; font-weight: 800;">Get In <span
                        style="opacity: 0.8;">Touch</span></h1>
                <p style="font-size: 1.3rem; opacity: 0.95; max-width: 800px; margin: 0 auto; line-height: 1.8;">We're
                    here to answer your questions and help you schedule your next visit to DentalCare Nepalgunj.</p>
            </div>
        </section>

        <section style="padding: 8rem 0; background: white;">
            <div class="container">
                <div class="grid grid-cols-2" style="gap: 6rem;">
                    <div class="fade-in">
                        <h2 style="font-size: 2.5rem; margin-bottom: 2rem;">Contact Information</h2>
                        <div style="display: flex; flex-direction: column; gap: 2rem;">
                            <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                                <div
                                    style="width: 50px; height: 50px; background: rgba(37, 99, 235, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 1.5rem; flex-shrink: 0;">
                                    üìç</div>
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Our Clinic</h4>
                                    <p style="color: var(--text-muted); line-height: 1.6;">Main Road, Nepalgunj
                                        02,<br>Banke, Nepal</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                                <div
                                    style="width: 50px; height: 50px; background: rgba(37, 99, 235, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 1.5rem; flex-shrink: 0;">
                                    üìû</div>
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Phone Number</h4>
                                    <p style="color: var(--text-muted); line-height: 1.6;">+977 81 5XXXXX<br>+977
                                        98XXXXXXXX</p>
                                </div>
                            </div>
                            <div style="display: flex; align-items: flex-start; gap: 1.5rem;">
                                <div
                                    style="width: 50px; height: 50px; background: rgba(37, 99, 235, 0.1); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 1.5rem; flex-shrink: 0;">
                                    ‚úâ</div>
                                <div>
                                    <h4 style="margin-bottom: 0.5rem;">Email Address</h4>
                                    <p style="color: var(--text-muted); line-height: 1.6;">
                                        support@dentalcare.com.np<br>info@dentalcare.com</p>
                                </div>
                            </div>
                        </div>

                        <!-- Map Embed -->
                        <div
                            style="margin-top: 4rem; border-radius: var(--radius); overflow: hidden; box-shadow: var(--shadow-lg); height: 350px;">
                            <iframe
                                src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d14107.039644372551!2d81.6148301!3d28.055!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x399863cd52ec77f1%3A0x600c5c64c7a5f642!2sNepalgunj!5e0!3m2!1sen!2snp!4v1700000000000!5m2!1sen!2snp"
                                width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"
                                referrerpolicy="no-referrer-when-downgrade">
                            </iframe>
                        </div>
                    </div>

                    <div class="glass fade-in" style="padding: 4rem; border-radius: var(--radius);">
                        <h3 style="font-size: 2rem; margin-bottom: 2rem; text-align: center;">Send a Message</h3>
                        <form id="contact-form" novalidate>
                            <div class="form-group">
                                <label class="form-label">Hospital / Clinic Name</label>
                                <input type="text" id="hospitalName" class="form-control"
                                    placeholder="e.g. Nepalgunj Dental Hospital" required>
                                <div class="error-text" id="hospitalName-error"
                                    style="color: var(--danger); font-size: 0.85rem; margin-top: 0.25rem; display: none;">
                                    Please enter the hospital name.</div>
                            </div>
                            <div class="grid grid-cols-2" style="gap: 1.5rem;">
                                <div class="form-group">
                                    <label class="form-label">Phone Number</label>
                                    <input type="tel" id="phone" class="form-control" placeholder="+977 98XXXXXXXX"
                                        required>
                                    <div class="error-text" id="phone-error"
                                        style="color: var(--danger); font-size: 0.85rem; margin-top: 0.25rem; display: none;">
                                        Invalid phone format.</div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Email Address</label>
                                    <input type="email" id="email" class="form-control" placeholder="john@example.com"
                                        required>
                                    <div class="error-text" id="email-error"
                                        style="color: var(--danger); font-size: 0.85rem; margin-top: 0.25rem; display: none;">
                                        Invalid email address.</div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Message</label>
                                <textarea id="message" class="form-control" rows="5"
                                    placeholder="Tell us more about your inquiry..." required></textarea>
                                <div class="error-text" id="message-error"
                                    style="color: var(--danger); font-size: 0.85rem; margin-top: 0.25rem; display: none;">
                                    Message cannot be empty.</div>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem;">Send
                                Inquiry Now</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer style="padding: 5rem 0; background: #0f172a; color: white;">
        <div class="container">
            <div class="grid grid-cols-3" style="margin-bottom: 4rem;">
                <div>
                    <h2 style="font-size: 1.5rem; margin-bottom: 1.5rem; color: white;">Hamro Dental <span
                            style="color: var(--accent);">Care</span></h2>
                    <p style="color: #94a3b8; line-height: 1.8;">Providing professional and gentle dental care since
                        2001. Your health and smile are our top priorities.</p>
                </div>
                <div>
                    <h4 style="margin-bottom: 1.5rem;">Quick Links</h4>
                    <ul style="list-style: none; color: #94a3b8; display: flex; flex-direction: column; gap: 0.75rem;">
                        <li><a href="index.html#services" style="color: inherit; text-decoration: none;">Services</a>
                        </li>
                        <li><a href="about.html" style="color: inherit; text-decoration: none;">About Us</a></li>
                        <li><a href="contact.html" style="color: inherit; text-decoration: none;">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 style="margin-bottom: 1.5rem;">Contact Us</h4>
                    <p style="color: #94a3b8; margin-bottom: 0.5rem;">üìç Nepalgunj, Nepal</p>
                    <p style="color: #94a3b8; margin-bottom: 0.5rem;">üìû +977 81 5XXXXX</p>
                    <p style="color: #94a3b8;">‚úâ info@dentalcare.com</p>
                </div>
            </div>
            <div
                style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 2rem; text-align: center; color: #64748b; font-size: 0.9rem;">
                <p>&copy; 2026 DentalCare Clinic. Developed by Jiban Chaudhary. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <div id="toast-container"></div>

    <script src="js/api.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            updateUIAuth();
            setupMobileMenu();
            setupContactValidation();
        });

        function setupMobileMenu() {
            const toggle = document.getElementById('mobile-menu');
            const nav = document.querySelector('.nav-links');
            if (toggle && nav) {
                toggle.addEventListener('click', () => {
                    toggle.classList.toggle('active');
                    nav.classList.toggle('active');
                });
            }
        }

        function updateUIAuth() {
            const user = JSON.parse(localStorage.getItem('user'));
            const authLinks = document.getElementById('auth-links');
            if (user) {
                let dashboard = 'patient.html';
                if (user.role === 'admin') dashboard = 'admin.html';
                if (user.role === 'dentist') dashboard = 'dentist.html';
                authLinks.innerHTML = `
                    <a href="${dashboard}" class="btn btn-outline" style="padding: 0.5rem 1rem;">Dashboard</a>
                    <button onclick="logout()" class="btn btn-primary" style="padding: 0.5rem 1rem;">Logout</button>
                `;
            }
        }

        function setupContactValidation() {
            const form = document.getElementById('contact-form');
            if (!form) return;

            const inputs = form.querySelectorAll('input, textarea');
            inputs.forEach(input => {
                input.addEventListener('input', () => validateField(input));
            });

            form.addEventListener('submit', async (e) => {
                e.preventDefault();
                let isValid = true;
                inputs.forEach(input => {
                    if (!validateField(input)) isValid = false;
                });

                if (!isValid) {
                    showToast('Please correct the errors in the form.', 'error');
                    return;
                }

                const payload = {
                    hospitalName: document.getElementById('hospitalName').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    message: document.getElementById('message').value
                };

                try {
                    const btn = form.querySelector('button');
                    btn.disabled = true;
                    btn.innerHTML = 'Sending...';

                    await fetchAPI('/messages', { method: 'POST', body: JSON.stringify(payload) });

                    showToast('Inquiry sent successfully! We will contact you soon.', 'success');
                    form.reset();
                    inputs.forEach(input => input.style.borderColor = '');
                } catch (err) {
                    showToast(err.message, 'error');
                } finally {
                    const btn = form.querySelector('button');
                    btn.disabled = false;
                    btn.innerHTML = 'Send Inquiry Now';
                }
            });
        }

        function validateField(input) {
            const errorDiv = document.getElementById(`${input.id}-error`);
            let isValid = true;
            let message = '';

            if (input.required && !input.value.trim()) {
                isValid = false;
                message = 'This field is required.';
            } else if (input.id === 'email') {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                if (!re.test(input.value)) {
                    isValid = false;
                    message = 'Invalid email address.';
                }
            } else if (input.id === 'phone') {
                const re = /^(\+977)?[9][0-9]{9}$/;
                if (!re.test(input.value.replace(/\s/g, ''))) {
                    isValid = false;
                    message = 'Invalid Nepal phone number (+977 9XXXXXXXXX).';
                }
            }

            if (errorDiv) {
                if (!isValid) {
                    input.style.borderColor = 'var(--danger)';
                    errorDiv.textContent = message;
                    errorDiv.style.display = 'block';
                } else {
                    input.style.borderColor = 'var(--success)';
                    errorDiv.style.display = 'none';
                }
            }
            return isValid;
        }

        function logout() {
            localStorage.removeItem('token');
            localStorage.removeItem('user');
            window.location.reload();
        }
    </script>
</body>

</html>